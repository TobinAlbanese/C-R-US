<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Cavities R US - Dental Clinic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">

    <!-- Font Awesome for social icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <link rel="stylesheet" href="/css/appointment.css">

</head>
<body>

<header>
    <a href="userHP.html">
        <img src="/C-R-US/public/assets/images/CRUSLogo.png" alt="Cavities R US Logo" width="65" height="65">
    </a>
    <h1>Cavities R US Dental Clinic</h1>
    <nav id="menu">
        <ul>
            <li><a href="userHP.html">Home</a></li>
            <li><a href="appointment.html">Book</a></li>
            <li><a href="userAbout.html">About</a></li>
            <li><a href="userServices.html">Services</a></li>
        </ul>
    </nav>
    <a href="login.html" id="logoutBtn"><button>Sign out</button></a>
</header>

<main>
    <h2>Manage Your Appointments</h2>

    <section id="headings">
        <p2>Appointments</p2>
    </section>




    <section id="appointment">




        <section id="appointment">
            <div class="appointment-dropdown">
                <button class="dropdown-toggle">Upcoming Appointments</button>
                <div class="dropdown-content" id="upcoming-appointments">
                    <!-- Future JS/database items -->
                    <div class="appointment-item">
                        <!-- placeholder -->
                        <p>No upcoming appointments.</p>
                    </div>
                </div>
            </div>
        
            <div class="appointment-dropdown">
                <button class="dropdown-toggle">Past Appointments</button>
                <div class="dropdown-content" id="past-appointments">
                    <!-- Future JS/database items -->
                    <div class="appointment-item">
                        <!-- placeholder -->
                        <p>No past appointments.</p>
                    </div>
                </div>
            </div>
        </section>
        
        


    </section>










    <section id="headings">
        <p2>Schedule an Appointment</p2>
    </section>

    <form id="appointment-form" action="/appointment" method="POST">
        <section id="schedule">
            <div class="appointment-date">
                <div class="form-section">
                    <label for="date-of-appointment" id="date-of-appointment-label">Date:</label>
                    <br>
                    <input type="text" id="date-of-appointment" name="date" required>
                    <br><br>
                </div>

                <div class="form-section">
                    <label id="time-of-appointment-label">Time:</label>
                    <br><br>
                    <div class="time-slot-container">
                        <button class="time-slot">08:00 AM</button>
                        <button class="time-slot">08:30 AM</button>
                        <button class="time-slot">09:00 AM</button>
                        <button class="time-slot">09:30 AM</button>
                        <button class="time-slot">10:00 AM</button>
                        <button class="time-slot">10:30 AM</button>
                        <button class="time-slot">11:00 AM</button>
                        <button class="time-slot">11:30 AM</button>
                        <button class="time-slot">12:00 PM</button>
                        <button class="time-slot">12:30 PM</button>
                        <button class="time-slot">01:00 PM</button>
                        <button class="time-slot">01:30 PM</button>
                        <button class="time-slot">02:00 PM</button>
                        <button class="time-slot">02:30 PM</button>
                        <button class="time-slot">03:00 PM</button>
                        <button class="time-slot">03:30 PM</button>
                        <button class="time-slot">04:00 PM</button>
                        <button class="time-slot">04:30 PM</button>
                    </div>
                    <input type="hidden" id="time-of-appointment" name="time" required>
                </div>
            </div>
  
            <!-- Services Section -->
            <div class="form-section">
                <label for="service-of-appointment" id="service-of-appointment-label">Select Service:</label>
                <br>
                <div class="service-select-container">
                    <div class="service-group-label">Standard Services</div>
                    <button class="service-option" data-value="Dental Exams" data-price="50" >Dental Exam</button>
                    <button class="service-option" data-value="Dental Cleanings & Prevention" data-price="75">Dental Cleaning</button>
                    <button class="service-option" data-value="Composite Filling" data-price="100">Composite Filling</button>
                    <button class="service-option" data-value="Crowns" data-price="200">Crowns</button>
                    <button class="service-option" data-value="Crown Lengthening" data-price="250">Crown Lengthening</button>
                    <button class="service-option" data-value="Full/Partial Dentures" data-price="300">Full & Partial Dentures</button>
                    <button class="service-option" data-value="Root Canal Therapy" data-price="400">Root Canal Therapy</button>
                    <button class="service-option" data-value="Dental X-rays" data-price="25">Dental X-rays</button>

                    <div class="service-group-label">Specialized Services</div>
                    <button class="service-option" data-value="Porcelain Crowns" data-price="500">Porcelain Crowns</button>
                    <button class="service-option" data-value="Zirconia Crowns" data-price="600">Zirconia Crowns</button>
                    <button class="service-option" data-value="Porcelain Veneers" data-price="700">Porcelain Veneers</button>
                    <button class="service-option" data-value="Restorations" data-price="150">Restorations</button>
                    <button class="service-option" data-value="Scaling and Root Planning" data-price="200">Scaling and Root Planning</button>
                    <button class="service-option" data-value="Sealants" data-price="50">Sealants</button>

                    <input type="hidden" id="service-of-appointment" name="service" required>
                </div>
            </div>

            <br><br>
            <div class="comments-container">
                <label for="comments">Comments:</label><br>
                <textarea id="comments" name="comments" placeholder="Any specific requests or comments?"></textarea>
            </div>
            

            <br><br>
            <div class="submit-container">
                <button type="submit" id="submit-button" class="submit-button">Schedule Appointment</button>
            </div>
        </section>
    </form>

    <section id="headings">
        <p2>Feedback</p2>
    </section>

    <section id="feedback">
        <p2>Weâ€™d love your feedback! <br> Help us improve by leaving a review.</p2>
        <a href="leaveAReview.html"><button>Leave a review</button></a>
    </section>
</main>

<!-----------------------Footer----------------------->
<footer>
        
    <div class="footer-info">
        <div class="footer-contact">
            <p id="name">Cavities R US Dental Clinic</p>
            <p id="footer-contact-info">6000 Jed Smith Dr, Sacramento, CA 95819</p>
            <p id="footer-contact-info">(916) 278-6011</p>

        </div>
        <div class="footer-follow">
            <p>Follow Us</p>
            <a href="https://www.facebook.com/login.php/" class="fa fa-facebook"></a>
            <a href="https://www.linkedin.com/home" class="fa fa-linkedin"></a>
            <a href="https://www.youtube.com/account_advanced" class="fa fa-youtube"></a>
            <a href="https://www.instagram.com/accounts/login/?hl=en" class="fa fa-instagram"></a>
        </div>
    </div>
    <p id="rights">&copy; 2025 Cavities R US. All rights reserved.</p>
</footer>

<!-- Flatpickr Script -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="../../C-R-US/public/assets/js/appointment.js"></script>
<script>
    flatpickr("#date-of-appointment", {
        inline: true,
        minDate: "today"
    });


document.querySelectorAll('.service-option').forEach(button => {
    button.addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelectorAll('.service-option').forEach(btn => btn.classList.remove('selected'));
        this.classList.add('selected');
        document.getElementById('service-of-appointment').value = this.dataset.value;
        localStorage.setItem('appointmentService', this.dataset.value);
        localStorage.setItem('appointmentPrice', this.dataset.price);  
    });
});

document.querySelectorAll('.time-slot').forEach(button => {
    button.addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelectorAll('.time-slot').forEach(btn => btn.classList.remove('selected'));
        this.classList.add('selected');
        document.getElementById('time-of-appointment').value = this.textContent;
        localStorage.setItem('appointmentTime', this.textContent);
    });
});

</script>
<script>
    document.getElementById('logoutBtn').addEventListener('click', async () => {
      const response = await fetch('/logout', { method: 'POST' });
      const data = await response.json();
      if (data.success) {
        window.location.href = '/login.html'; 
        sessionStorage.removeItem('userId');
        localStorage.removeItem('userId'); 
        localStorage.removeItem('role');
        sessionStorage.removeItem('userRole');
        localStorage.clear();
      }
    });
  </script>
  <script>
    function handleBookingClick() {
      const userLoggedIn = sessionStorage.getItem('userId');
  
      if (!userLoggedIn) {
        sessionStorage.setItem('redirectAfterLogin', 'appointment.html');
        window.location.href = 'login.html';
      } else {
        window.location.href = 'appointment.html';
      }
    }
  </script>



<script>
    document.querySelectorAll('.dropdown-toggle').forEach(button => {
        button.addEventListener('click', () => {
            const content = button.nextElementSibling;
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        });
    });
</script>

</body>
</html>
